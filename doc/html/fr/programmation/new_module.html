<!doctype public "-//w3c//dtd html 4.01 transitional//en" 
		"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <title>Programmation Anatomist: faire un module</title>
  <style type="text/css">
    BODY {
	  text-align: justify;
	  margin: 0.5cm;
	}
  </style>
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000EE" vlink="#551A8B" alink="#FF0000">

<center><table WIDTH="100%" NOSAVE >
<tr NOSAVE>
<td ALIGN=RIGHT VALIGN=CENTER NOSAVE>
<img SRC="../../images/anaLogo.png" NOSAVE align=CENTER></td>

<td ALIGN=CENTER VALIGN=CENTER WIDTH="100%" NOSAVE>
<h1>
Programmation dans Anatomist:<br>
fabriquer un nouveau module</h1>
</td>

<td><a href="http://www-dsv.cea.fr/content/cea/d_dep/d_drm/d_shfj/d_unaf/">
<img SRC="../../images/logo_shfj_t.png" NOSAVE BORDER=0 align=CENTER></a>
<a href="mailto:&#109;&#97;&#110;&#103;&#105;&#110;&#64;&#115;&#104;&#102;&#106;&#46;&#99;&#101;&#97;&#46;&#102;&#114;">
<img SRC="../../images/feather.png" NOSAVE BORDER=0 align=CENTER></a></td>
</tr>
</table></center>

<hr WIDTH="100%">
<p><i>(mise &agrave; jour:&nbsp;27/07/2001)</i>
<p>C'est relativement simple:&nbsp;il faut cr&eacute;er une classe d&eacute;rivant
de Module et l'instancier une fois:
<p><tt>&nbsp; #include &lt;anatomist/application/module.h></tt><tt></tt>
<p><tt>&nbsp; namespace anatomist</tt>
<br><tt>&nbsp; {</tt><tt></tt>
<p><tt>&nbsp;&nbsp;&nbsp; class MyModule: public Module</tt>
<br><tt>&nbsp;&nbsp;&nbsp; {</tt>
<br><tt>&nbsp;&nbsp;&nbsp; public:</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MyModule();</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; virtual ~MyModule();</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; virtual std::string name() const
{ return "MyModule"; }</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; virtual std::string description()&nbsp;const
{ return "Performs lots of marvelous things"&nbsp;}</tt>
<br><tt>&nbsp;&nbsp;&nbsp; };</tt><tt></tt>
<p><tt>&nbsp; }</tt>
<p>Pour instancier un module depuis une librairie dynamique, utilizez une
variable statique (un bool&eacute;en ou un pointeur, &eacute;viter d'utiliser
un objet Module statique), par ex. dans le source du module en question:
<p><tt>&nbsp; static bool myModuleInitialized = initMyModule();</tt><tt></tt>
<p><tt>&nbsp; static bool initMyModule()</tt>
<br><tt>&nbsp; {</tt>
<br><tt>&nbsp;&nbsp;&nbsp; new MyModule;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; return&nbsp;true;</tt>
<br><tt>&nbsp; }</tt>
<p>Si le module apporte des nouveaux types d'objets, de fen&ecirc;tres,
de contr&ocirc;les, ou des nouvelles options pour certains objets, on peut
surcharger les fonctions correspondantes de la classe Module et leur faire
faire les initialisations n&eacute;c&eacute;ssaires. Voir les pages de
docs correspondantes pour plus de d&eacute;tails (quand elles seront &agrave;
jour...)
<br>&nbsp;
</body>
</html>
