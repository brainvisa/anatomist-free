<!doctype public "-//w3c//dtd html 4.01 transitional//en" 
		"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <style type="text/css">
    BODY {
	  text-align: justify;
	  margin: 0.5cm;
	}
  </style>
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000EF" vlink="#51188E" alink="#FF0000">
<center><table WIDTH="100%" NOSAVE >
<tr NOSAVE>
<td NOSAVE><img SRC="../../images/texture.jpg" NOSAVE></td>

<td ALIGN=CENTER VALIGN=CENTER WIDTH="100%" NOSAVE>
<center>
<h1>
Anatomist: placage d'informations surfacique</h1></center>
</td>

<td><img SRC="../../images/anaLogo.png" NOSAVE height=96 width=96></td>
</tr>
</table></center>

<hr WIDTH="100%">
<p><b><font size=+1><a href="#texture">Objets texture</a></font></b>
<br><b><font size=+1><a href="#texsurface">Fusion surface - texture</a></font></b>
<br><b><font size=+1><a href="#texture2D">Textures 2D: jouer avec les tables
de couleurs 2D</a></font></b>
<br><b><font size=+1><a href="#surfmatch">D&eacute;formation et mise en
correspondance de surfaces</a></font></b>
<br><b><font size=+1><a href="#interpoler">Interpolation de donn&eacute;es
fonctionnelles d'une surface &agrave; une autre</a></font></b>
<p>
<hr WIDTH="100%">
<h2>
<a NAME="texture"></a>Objets texture</h2>
Fichiers .tex: donnent une ou plusieurs valeurs pour chaque sommet d'un
maillage associ&eacute;, &eacute;ventuellement en fonction du temps (s&eacute;quences
temporelles).
<br>1 valeur par sommet: texture 1D
<br>2 valeurs par sommet: texture 2D
<p>Fichiers d'EEG: r&eacute;pertoires contenant des fichiers .erp et un
fichier de description "erp.hdr": informations (1D) associ&eacute;es &agrave;
un filet d'&eacute;lectrodes, pour un certain nombre de sujets, d'essais
et de conditions diff&eacute;rents, en fonction du temps. Sp&eacute;cialement
pour ces fichiers, on&nbsp; peut ouvrir une petite fen&ecirc;tre sur les
textures (dans le menu "Object manipulations", "File", "ERP loader" lorsqu'une
texture est s&eacute;lectionn&eacute;e dans la fen&ecirc;tre de contr&ocirc;le)
pour contr&ocirc;ler les dimensions suppl&eacute;mentaires qui ne sont
normalement pas dans Anatomiust: sujet, essai.
<center>
<p><img SRC="../../images/texture/erpLoader.gif" NOSAVE height=147 width=212></center>

<p>Les fichiers de texture ne contiennent pas le maillage lui-m&ecirc;me.
<br>Les objets texture ne sont pas affichables seuls: <b><font color="#FF0000">on
ne peut pas les mettre dans une fen&ecirc;tre 2D ou 3D</font></b>. Ils
sont uniquement destin&eacute;s &agrave; &ecirc;tre fusionn&eacute;s avec
une surface.
<h2>
<a NAME="texsurface"></a>Fusion surface - texture</h2>

<li>
Charger le maillage de la surface (fichier .tri ou .mesh)</li>

<li>
Charger la texture</li>

<li>
S&eacute;lectionner ces deux objets dans la fen&ecirc;tre de contr&ocirc;le</li>

<li>
Effectuer une "fusion" des deux: dans le menu "Ojbects", choisir "Fusion
objects". Un nouvel object surface textur&eacute;e ("Textured surf.") est
cr&eacute;&eacute;.</li>

<li>
Ouvrir une fen&ecirc;tre 3D</li>

<li>
Mettre la nouvelle fusion dans la fen&ecirc;tre 3D</li>

<li>
Modifier la table de couleurs de la fusion (tout est en gris par d&eacute;faut,
donc tr&egrave;s peu visible)</li>

<br>&nbsp;
<center><table NOSAVE >
<tr ALIGN=CENTER NOSAVE>
<td NOSAVE><img SRC="../../images/texture/ctrl_texsurface.gif" NOSAVE height=222 width=580></td>
</tr>

<tr ALIGN=CENTER NOSAVE>
<td NOSAVE><img SRC="../../images/texture/texsurface.gif" NOSAVE height=370 width=351>
<br>(c'est un maillage de filet d'&eacute;lectrodes EEG et un jeu de potentiels
enregistr&eacute;s)</td>
</tr>
</table></center>

<p>Pour les maillages temporels, un slider de temps apparait dans la fen&ecirc;tre
3D de mani&egrave;re &agrave; faire bouger les activations.
<h2>
<a NAME="texture2D"></a><b><font size=+1>Textures 2D: jouer avec les tables
de couleurs 2D</font></b></h2>
Les textures 2D ont 2 inforations &agrave; afficher par sommet du maillage.
Cela veut dire, en gros, 2 couleurs &agrave; plaquer sur chaque sommet.
On utilise des tables de couleurs &agrave; 2 dimensions.
<p>- soit directement avec une palette 2D (image pr&eacute;d&eacute;finie):
<center>
<p><img SRC="../../images/texture/palette2D_1pal.gif" NOSAVE height=349 width=729>
<p><img SRC="../../images/texture/palette2D_1pal-cervgongl.jpg" NOSAVE height=326 width=336>
<br>Cerveau gonfl&eacute; avec informations 2D: en couleur, l'activation;
en fonc&eacute;: les sillons profonds</center>

<p>- soit en combinant 2 palettes 1D dans 2 dimensions:
<center>
<p><img SRC="../../images/texture/palette2D_2pal.jpg" NOSAVE height=573 width=895></center>

<br>&nbsp;
<center><table COLS=2 WIDTH="100%" NOSAVE >
<tr ALIGN=CENTER NOSAVE>
<td NOSAVE><img SRC="../../images/texture/palette2D_2pal-cervgongl.jpg" NOSAVE height=326 width=336>
<br>Cerveau gonfl&eacute; avec informations 2D: en rouge, l'activation;
en bleu: la profondeur des sillons</td>

<td NOSAVE><img SRC="../../images/texture/palette2D_2pal-matblanche.jpg" NOSAVE height=326 width=336>
<br>Mati&egrave;re blanche, le maillage correspond &agrave; celui de l'image
du cerveau gonfl&eacute;, les informations de texture sont identiques</td>
</tr>
</table></center>

<h2>
<a NAME="surfmatch"></a>D&eacute;formation et mise en correspondance de
surfaces</h2>

<li>
Charger les deux maillages dans Anatomist</li>

<li>
Effectuer une fusion des deux surfaces: un nouvel objet: un ojbet "surface
matcher" est cr&eacute;&eacute;.</li>

<li>
S&eacute;lectionner cet objet, et ouvrir sa fen&ecirc;tre de contr&ocirc;le
dans le menu "Object manipulations", "Fusion", "Surface matching window"</li>

<li>
Ouvrir l'objet SurfMatch: il contient 3 objets: les deux surfaces initiales,
plus une troisi&egrave;me, nouvelle: "matchsurf.mesh": c'est celle-ci qui
sera d&eacute;form&eacute;e</li>

<li>
Ouvrir une fen&ecirc;tre 3D</li>

<li>
Mettre dans cette fen&ecirc;tre la surface cible et la nouvelle surface
d&eacute;formable matchsurf.mesh. Au d&eacute;part la surface d&eacute;formable
n'apparait pas (elle est vide)</li>

<center>
<p><br><img SRC="../../images/texture/ctrl_matcher.gif" NOSAVE height=258 width=580>
<p><img SRC="../../images/texture/surfmatcher_win.gif" NOSAVE height=312 width=891></center>

<p><br>
<li>
Choisir le sens de la transformation dans la fen&ecirc;tre de mise en correspondance
de surfaces, en changeant au besoin "from / to"</li>

<li>
Cliquer sur "Reset": la surface d&eacute;formable apparait, dans l'&eacute;tat
correspondant &agrave; la surface initiale</li>

<li>
Pour y voir un peu clair, il peut &ecirc;tre utile de mettre un peu de
transparence sur la surface finale, et une couleur diff&eacute;rente (transparence:
dans les mat&eacute;riaux, baisser le coef alpha du param&egrave;tre "Diffuse")</li>

<li>
R&eacute;gler les param&egrave;tres de mise en correspondance dans la colonne
centrale, "Matching parameters"</li>

<li>
Ajouter si besoin des "points de contr&ocirc;le": points d'attraction directe
entre les deux surfaces</li>

<li>
"Record over time", s'il est coch&eacute;, permet de m&eacute;moriser toute
la s&eacute;quence des transformations it&eacute;ratives dans la surface
matchsurf.mesh, dans une s&eacute;quence temporelle qui peut ensuite &ecirc;tre
sauvegard&eacute;e sur disque. Attention: ca prend BEAUCOUP de m&eacute;moire,
surtout si la surface initiale comporte beaucoup de sommets et de triangles...</li>

<li>
Quand tout est pr&ecirc;t, lancer la mise en correspondance avec le bouton
"Start"</li>

<li>
Il est possible de changer tous les param&egrave;tres, et d'ajouter ou
enlever des points de contr&ocirc;le en cours de d&eacute;formation &agrave;
mesure que l'on voit comment &ccedil;a se passe</li>

<li>
Lorsqu'on est satisfait du r&eacute;sultat, on arr&ecirc;te en cliquant
"Stop" (&ccedil;a ne s'arr&ecirc;te pas tout seul: il n'y a pas de crit&egrave;re
de convergence)</li>

<br>&nbsp;
<center><table COLS=2 WIDTH="100%" NOSAVE >
<tr ALIGN=CENTER NOSAVE>
<td NOSAVE><img SRC="../../images/texture/surfmatch_3Dinit.jpg" NOSAVE height=370 width=351></td>

<td NOSAVE><img SRC="../../images/texture/surfmatch_3Dfinal.jpg" NOSAVE height=370 width=351></td>
</tr>
</table></center>

<p>Une surface d&eacute;form&eacute;e poss&egrave;de le m&ecirc;me nombre
de sommets que la surface d'origine, leur ordre est conserv&eacute;, et
&eacute;galement les triangles: les sommets sont d&eacute;plac&eacute;s
sans que quoi que ce soit ne change la structure de la surface: ainsi on
peut utiliser les textures pr&eacute;vues pour la surface d'origine sur
une surface d&eacute;form&eacute;e:
<br>&nbsp;
<center><table WIDTH="100%" NOSAVE >
<tr ALIGN=CENTER NOSAVE>
<td NOSAVE>
<center><img SRC="../../images/texture/surfmatch_texture.jpg" NOSAVE height=370 width=351></center>
</td>

<td><img SRC="../../images/texture/surfmatch_texture_head.jpg" NOSAVE height=370 width=351></td>
</tr>
</table></center>

<h2>
<a NAME="interpoler"></a>Interpolation de donn&eacute;es fonctionnelles
d'une surface &agrave; une autre</h2>
L'interpolation sert &agrave; plaquer des donn&eacute;es de texture sur
un maillage plus fin que celui auquel il est normalement associ&eacute;.
<br>Pour fonctionner correctement l'interpolation doit utiliser deux surfaces
"recal&eacute;es": la surface d'origine doit avoir &eacute;t&eacute; d&eacute;form&eacute;e
pour correspondre &agrave; la la g&eacute;om&eacute;trie de la surface
"cible", ce qui peut &ecirc;tre fait en utilisant la mise en correspondance
de surface qui vient d'&ecirc;tre d&eacute;crite. Si ce recalage n'a pas
&eacute;t&eacute; fait, l'interpolation donnera un peu n'importe quoi et
le r&eacute;sultat n'aura aucune valeur.
<br>&nbsp;
<li>
Charger les deux surfaces</li>

<li>
Charger la texture (donn&eacute;es fonctionnelles)</li>

<li>
Effectuer une fusion entre la texture et la surface qui lui correspond
(ex: donn&eacute;es d'EEG et maillage des &eacute;lectrodes d&eacute;form&eacute;
pour coller &agrave; la tete)</li>

<li>
Effectuer une seconde fusion entre la surface textur&eacute;e (1&egrave;re
fusion) et le second maillage (ex: celui de la tete)</li>

<li>
Mettre cette derni&egrave;re fusion (objet "Interpoler" ) dans une fen&ecirc;tre
3D et changer sa palette</li>

<center>
<p><br><img SRC="../../images/texture/ctrl_interpoler.gif" NOSAVE height=319 width=580>
<p><img SRC="../../images/texture/interpoler.jpg" NOSAVE height=363 width=376></center>

<p>Pour le moment il ne s'agit que d'une interpolation lin&eacute;aire.
<p>L'interpolation prend tout de m&ecirc;me un peu de temps de calcul:
ne vous attendez pas &agrave; des changements aussi fluides qu'avec la
surface originale quand vous bougez le slider de temps...
<br>&nbsp;
</body>
</html>
